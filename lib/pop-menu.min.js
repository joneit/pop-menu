"use strict";window.popMenu=function(){function e(t,a,r){r=r||{};var i,l=r.prompt,s=r.blacklist,c=r.sort,f=r.breadcrumbs||[],d=f.length?f.join(".")+".":"",p=u.subtree,m=0;if(t instanceof Element?(i=t.tagName,r.append||(t.innerHTML="")):(i=t,t=document.createElement(i)),a){var b,v;"SELECT"===i?(b=t.add,l?(v=new Option(l,""),v.innerHTML+="&hellip;",t.add(v)):null!==l&&t.add(new Option)):(b=t.appendChild,t.label=l),c&&(a=a.slice().sort(n)),a.forEach(function(n){if(r&&"string"==typeof n){var a=n.match(o);if(a){var i=a[1],l=a[2],u=r[i];if("function"!=typeof u)throw"build: Expected options."+i+" to be a function.";n=u(l)}}var v=n[p]||n;if(v instanceof Array){var h={breadcrumbs:f.concat(++m),prompt:n.label||"Group "+d+m,options:c,blacklist:s},y=e("OPTGROUP",v,h);y.childElementCount&&t.appendChild(y)}else if("object"!=typeof n)s&&s.indexOf(n)>=0||b.call(t,new Option(n));else if(!n.hidden){var w=n.name||n.alias;s&&s.indexOf(w)>=0||b.call(t,new Option(n.alias||n.name,w))}})}else t.type="text";return t}function n(e,n){return e=e.alias||e.name||e.label||e,n=n.alias||n.name||n.label||n,n>e?-1:e>n?1:0}function t(e,n){var r,i,l,o,s=n&&n.keys||[u.defaultKey],c=n&&n.caseInsensitive;return e=a(e,c),r=this.find(function(r){var l=r[u.subtree]||r;if(l instanceof Array)return i=t.call(l,e,n);for(var c=0;c<s.length;++c)return o=s[c],a(r[o]||o===u.defaultKey&&r)===e}),l=i||r,l&&(l.name?l:{name:l})}function a(e,n){var t="";return e&&(t+=e,n&&(t=t.toUpperCase())),t}function r(e){var n,t,a,i,l=this,o=0,s=u.subtree;for(n=l.length-1;n>=0;--n)t=l[n],a=t[s]||t,a instanceof Array||(a=void 0),a||(i=e(t.name?t:{name:t},o),o+=1,void 0!==i&&(null===i?(l.splice(n,1),o-=1):(l[n]=t=i,a=t[s]||t,a instanceof Array||(a=void 0)))),a&&(o+=r.call(a,e),0===a.length&&(l.splice(n,1),o-=1));return o}function i(e){var n=e.name||e;return e.alias&&(n='"'+e.alias+'" ('+n+")"),n}function l(e){return o.test(e)}var o=/^(\w+)\((\w+)\)$/,u={build:e,walk:r,findItem:t,formatItem:i,isGroupProxy:l,subtree:"submenu",defaultKey:"name"};return u}();