"use strict";window.popMenu=function(){function e(t,a,r){r=r||{};var i,o=r.prompt,s=r.blacklist,c=r.sort,f=r.breadcrumbs||[],p=f.length?f.join(".")+".":"",d=u.subtree,m=0;if(t instanceof Element?(i=t.tagName,r.append||(t.innerHTML="")):(i=t,t=document.createElement(i)),a){var b,v;"SELECT"===i?(b=t.add,o?(v=new Option(o,""),v.innerHTML+="&hellip;",t.add(v)):null!==o&&t.add(new Option)):(b=t.appendChild,t.label=o),c&&(a=a.slice().sort(n)),a.forEach(function(n){if(r&&"string"==typeof n){var a=n.match(l);if(a){var i=a[1],o=a[2],u=r[i];if("function"!=typeof u)throw"build: Expected options."+i+" to be a function.";n=u(o)}}var v=n[d]||n;if(v instanceof Array){var h={breadcrumbs:f.concat(++m),prompt:n.label||"Group "+p+m,options:c,blacklist:s},y=e("OPTGROUP",v,h);y.childElementCount&&t.appendChild(y)}else if("object"!=typeof n)s&&s.indexOf(n)>=0||b.call(t,new Option(n));else if(!n.hidden){var w=n.name||n.alias;s&&s.indexOf(w)>=0||b.call(t,new Option(n.alias||n.name,w))}})}else t.type="text";return t}function n(e,n){return e=e.alias||e.name||e.label||e,n=n.alias||n.name||n.label||n,n>e?-1:e>n?1:0}function t(e,n){1===arguments.length&&(n=e,e=void 0);var r,i,o,l,s=e&&e.keys||[u.defaultKey],c=e&&e.caseSensitive;return n=a(n,c),r=this.find(function(r){var o=r[u.subtree]||r;if(o instanceof Array)return i=t.call(o,e,n);if("object"!=typeof r)return a(r,c)===n;for(var f=0;f<s.length;++f)if(l=r[s[f]],l&&a(l,c)===n)return!0}),o=i||r,o&&(o.name?o:{name:o})}function a(e,n){var t="";return e&&(t+=e,n||(t=t.toUpperCase())),t}function r(e){var n,t,a,i,o=this,l=0,s=u.subtree;for(n=o.length-1;n>=0;--n)t=o[n],a=t[s]||t,a instanceof Array||(a=void 0),a||(i=e(t.name?t:{name:t},l),l+=1,void 0!==i&&(null===i?(o.splice(n,1),l-=1):(o[n]=t=i,a=t[s]||t,a instanceof Array||(a=void 0)))),a&&(l+=r.call(a,e),0===a.length&&(o.splice(n,1),l-=1));return l}function i(e){var n=e.name||e;return e.alias&&(n='"'+e.alias+'" ('+n+")"),n}function o(e){return l.test(e)}var l=/^(\w+)\((\w+)\)$/,u={build:e,walk:r,lookup:t,formatItem:i,isGroupProxy:o,subtree:"submenu",defaultKey:"name"};return u}();