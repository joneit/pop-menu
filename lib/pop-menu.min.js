"use strict";window.popMenu=function(){function e(t,a,r){r=r||{};var i,o=r.prompt,s=r.blacklist,c=r.sort,f=r.breadcrumbs||[],d=f.length?f.join(".")+".":"",p=u.subtree,m=0;if(t instanceof Element?(i=t.tagName,r.append||(t.innerHTML="")):(i=t,t=document.createElement(i)),a){var h,b;"SELECT"===i?(h=t.add,o?(b=new Option(o,""),b.innerHTML+="&hellip;",t.add(b)):null!==o&&t.add(new Option)):(h=t.appendChild,t.label=o),c&&(a=a.slice().sort(n)),a.forEach(function(n){if(r&&"string"==typeof n){var a=n.match(l);if(a){var i=a[1],o=a[2],u=r[i];if("function"!=typeof u)throw"build: Expected options."+i+" to be a function.";if(n=u(o),!n)throw"build: Expected a result from options."+i+"("+o+")."}}var b=n[p]||n;if(b instanceof Array){var v={breadcrumbs:f.concat(++m),prompt:n.label||"Group "+d+m,options:c,blacklist:s},y=e("OPTGROUP",b,v);y.childElementCount&&t.appendChild(y)}else if("object"!=typeof n)s&&s.indexOf(n)>=0||h.call(t,new Option(n));else if(!n.hidden){var w=n.name||n.alias||n.header;s&&s.indexOf(w)>=0||h.call(t,new Option(n.alias||n.header||n.name,w))}})}else t.type="text";return t}function n(e,n){return e=e.alias||e.header||e.name||e.label||e,n=n.alias||n.header||n.name||n.label||n,n>e?-1:e>n?1:0}function t(e,n){1===arguments.length&&(n=e,e=void 0);var r,i,o,l,s=e&&e.keys||[u.defaultKey],c=e&&e.caseSensitive;return n=a(n,c),r=this.find(function(r){var o=r[u.subtree]||r;if(o instanceof Array)return i=t.call(o,e,n);if("object"!=typeof r)return a(r,c)===n;for(var f=0;f<s.length;++f)if(l=r[s[f]],l&&a(l,c)===n)return!0}),o=i||r,o&&(o.name?o:{name:o})}function a(e,n){var t="";return e&&(t+=e,n||(t=t.toUpperCase())),t}function r(e,n){var t,a,i,o,l=this,s=0,c=u.subtree;for(void 0===n&&(n=this),t=l.length-1;t>=0;--t)a=l[t],i=a[c]||a,i instanceof Array||(i=void 0),i||(o=e.call(n,a.name?a:{name:a},s),s+=1,void 0!==o&&(null===o?(l.splice(t,1),s-=1):(l[t]=a=o,i=a[c]||a,i instanceof Array||(i=void 0)))),i&&(s+=r.call(i,e),0===i.length&&(l.splice(t,1),s-=1));return s}function i(e){var n=e.name||e,t=e.alias||e.header;return t?'"'+t+'" ('+n+")":n}function o(e){return l.test(e)}var l=/^(\w+)\((\w+)\)$/,u={build:e,walk:r,lookup:t,formatItem:i,isGroupProxy:o,subtree:"submenu",defaultKey:"name"};return u}();