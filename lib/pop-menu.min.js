"use strict";window.popMenu=function(){function n(t,a,i){i=i||{};var r,c=i.prompt,s=i.blacklist,u=i.sort,f=i.breadcrumbs||[],d=f.length?f.join(".")+".":"",p=o.subtree,m=0;if(t instanceof Element?(r=t.tagName,i.append||(t.innerHTML="")):(r=t,t=document.createElement(r)),a){var b,v;"SELECT"===r?(b=t.add,c?(v=new Option(c,""),v.innerHTML+="&hellip;",t.add(v)):null!==c&&t.add(new Option)):(b=t.appendChild,t.label=c),u&&(a=a.slice().sort(e)),a.forEach(function(e){if(i&&"string"==typeof e){var a=e.match(l);if(a){var r=a[1],o=a[2],c=i[r];if("function"!=typeof c)throw"build: Expected options."+r+" to be a function.";e=c(o)}}var v=e[p]||e;if(v instanceof Array){var h={breadcrumbs:f.concat(++m),prompt:e.label||"Group "+d+m,options:u,blacklist:s},w=n("OPTGROUP",v,h);w.childElementCount&&t.appendChild(w)}else if("object"!=typeof e)s&&s.indexOf(e)>=0||b.call(t,new Option(e));else if(!e.hidden){var y=e.name||e.alias;s&&s.indexOf(y)>=0||b.call(t,new Option(e.alias||e.name,y))}})}else t.type="text";return t}function e(n,e){return n=n.alias||n.name||n.label||n,e=e.alias||e.name||e.label||e,e>n?-1:n>e?1:0}function t(n){var e,a,i,r=o.subtree;return e=this.find(function(e){var i=e[r]||e;return i instanceof Array?a=t.call(i,n):(e.name||e)===n}),i=a||e,i&&(i.name?i:{name:i})}function a(n){var e,t,i,r,l=this,c=0,s=o.subtree;for(e=l.length-1;e>=0;--e)t=l[e],i=t[s]||t,i instanceof Array||(i=void 0),i||(r=n(t.name?t:{name:t},c),c+=1,void 0!==r&&(null===r?(l.splice(e,1),c-=1):(l[e]=t=r,i=t[s]||t,i instanceof Array||(i=void 0)))),i&&(c+=a.call(i,n),0===i.length&&(l.splice(e,1),c-=1));return c}function i(n){var e=n.name||n;return n.alias&&(e='"'+n.alias+'" ('+e+")"),e}function r(n){return l.test(n)}var l=/^(\w+)\((\w+)\)$/,o={build:n,walk:a,findItem:t,formatItem:i,isGroupProxy:r,subtree:"submenu"};return o}();