"use strict";window.popMenu=function(){function n(a,t,i){i=i||{};var r,l=i.prompt,u=i.blacklist,c=i.sort,s=i.breadcrumbs||[],f=s?s.join(".")+".":"";if(a instanceof Element?(r=a.tagName,i.append||(a.innerHTML="")):(r=a,a=document.createElement(r)),t){var d,m;"SELECT"===r?(d=a.add,l?(m=new Option(l,""),m.innerHTML+="&hellip;",a.add(m)):null!==l&&a.add(new Option)):(d=a.appendChild,a.label=l),c&&(t=t.slice().sort(e)),t.forEach(function(e,t){if(i&&"string"==typeof e){var r=e.match(o);if(r){var l=r[1],m=r[2],p=i[l];if("function"!=typeof p)throw"build: Expected options."+l+" to be a function.";e=p(m)}}var b=e.submenu||e;if(b instanceof Array){var v={breadcrumbs:s.concat(t+1),prompt:e.label||"Group "+f+(t+1),options:c,blacklist:u},w=n("OPTGROUP",b,v);w.childElementCount&&a.add(w)}else if("object"!=typeof e)u&&u.indexOf(e)>=0||d.call(a,new Option(e));else if(!e.hidden){var h=e.name||e.alias;u&&u.indexOf(h)>=0||d.call(a,new Option(e.alias||e.name,h))}})}else a.type="text";return a}function e(n,e){return n=n.alias||n.name||n.label||n,e=e.alias||e.name||e.label||e,e>n?-1:n>e?1:0}function a(n,e){var t,i,r;return t=n.find(function(n){var t=n.submenu||n;return t instanceof Array?i=a(t,e):(n.name||n)===e}),r=i||t,r&&(r.name?r:{name:r})}function t(n,e){var a,i,r,o,l=0;for(a=n.length-1;a>0;--a)i=n[a],r=i.submenu||i,r instanceof Array||(r=void 0),r||(o=e(i.name?i:{name:i},l),l+=1,void 0!==o&&(null===o?(n.splice(a,1),l-=1):(n[a]=i=o,r=i.submenu||i,r instanceof Array||(r=void 0)))),r&&(l+=t(r,e),0===r.length&&(n.splice(a,1),l-=1));return l}function i(n){var e=n.name||n;return n.alias&&(e='"'+n.alias+'" ('+e+")"),e}function r(n){return o.test(n)}var o=/^(\w+)\((\w+)\)$/,l={build:n,walk:t,findItem:a,formatItem:i,isGroupProxy:r};return l}();